<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xml:lang="ja" lang="ja" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>tonextone.com/note/</title>
  <link rel="top" href="index.html" />
<link rel="prev" href="index-p_5.html" title="26-30" />
<link rel="next" href="index-p_3.html" title="16-20" />
  <link rel="stylesheet" href="style/style-sites.css" type="text/css" media="screen" />
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://legacy.tonextone.com/note/rss.rdf" />
 </head>
 <body>
    <h1 id="banner"><a href="/note/../">tonextone.com</a><a href="https://tonextone.com/note/">/note/</a></h1>
   <p id="credit">Last-modified: 2006-09-01 (金)</p>
   <p id="credit">Copyright ©master_at_tonextone.com All rights reserved.</p>
<div id="content">
  
  
    <div id="menu">
      <p>Category:<a href="index.html">Top</a> (Total 38 items)</p>
<p><a href="index-p_5.html">« 26-30</a> | 21-25 | <a href="index-p_3.html">16-20 »</a></p>
    </div>
    <div class="item">
  <h3><a href="diary/20050905.html">PHP on Biscuit</a></h3>
  <span class="meta">
    Posted : 2005-09-05 00:00 / Category : [開発日誌]
  </span>
  <div class="text">
    <a href="https://tonextone.com/note/diary/20050717.html">このエントリ</a>に関連して。<br />

    Ruby の Rails を真似た PHP 版フレームワークとして、
    <a href="http://cakephp.org/" target="_blank">Cake</a> に続き、
    <a href="http://bennolan.com/biscuit/" target="_blank">Biscuit</a> を触ってみた。<br />
    Tutorial にしたがって、<a href="https://tonextone.com/test/biscuit_forum/" target="_blank">これ</a>を作ってみた。<br />
    <h4>特徴:</h4>
    <ol>
      <li>PEAR(DBその他)を使う。</li>
      <li>テンプレートエンジンを使わなくて良い。</li>
      <li>グローバルな、変数、関数を上手く使う。</li>
      <li>4つ(だけ!)のファイルで構成される。</li>
      <li>そもそも構成ファイルが少ないので、どうにでもできる。</li>
    </ol>
    <h4>ファイル構成:</h4>
<pre>
biscuit_forum/
|-- index.php (本体)
|
|-- biscuit/ (ライブラリ)
|   |-- activerecord.inc (モデル: クラス定義)
|   |-- activecontroller.inc (コントローラ: クラス定義)
|   `-- actionpack.inc (ビュー: 関数定義)
|
|   # 上記が構成ファイル。(<a href="http://jp.rubyist.net/magazine/?0004-RubyOnRails" target="_blank">参考</a>)
|   # 下記のファイルでアプリを実装する。
|
|-- models/ (モデル: インスタンス作成)
|   `-- post.php (ファイル名 = モデル名)
|
|-- controllers/ (コントローラ: インスタンス作成)
|   `-- forum_controller.php (ファイル名 = コントローラ名_controller)
|
`-- views/ (ビュー: テンプレート)
    `-- forum/ (ディレクトリ名 = コントローラ名)
        |-- create.html (ファイル名 = アクション名)
        |-- index.html
        |-- login.html
        `-- show.html</pre>

    <h4>所感</h4>
    かなり好感触。<br />
    /index.php(100行) が本体で、これを読めばフレームワークの概要は理解できる。<br />
    グローバルな変数、関数を積極的に使う事により、<br />
    コアクラスのメンバが必要最小限に抑えられているので、<br />
    覚えなければならない事や、親子関係を意識しなければならない状況が少ない。<br />

    [<a href="http://folder.tonextone.com/___item/biscuit_forum.tgz" target="_blank">一式</a>]<br />
    <br />
  
    
  </div>
  
<div class="writeback">
    <h4>トラックバック</h4>
    
    
        (2)<br />
    
    
    
        [ このエントリへはツッコミ出来ません ]<br />
    
</div>
</div>
<br class="sep" /><div class="item">
  <h3><a href="diary/20050904.html">JavaScript の *.onkey* と IME の事情。その2</a></h3>
  <span class="meta">
    Posted : 2005-09-04 00:00 / Category : [開発日誌]
  </span>
  <div class="text">
    <a href="https://tonextone.com/note/diary/20050829.html">このエントリ</a>の続き。<br />
    ようやく、時間がとれたので、<a href="http://www.google.co.jp/ac.js" target="_blank">ac.js</a>を読んでみた。<br />
    結論:<br />
    <pre>
key event をトリガーにするのは諦めて、入力値の変更をトリガーにしている。
そのために、10 ms 毎に入力値を監視している(idkc() という関数)。</pre>
    その部分だけ抜き出すと、つまり<a href="https://tonextone.com/test/onLiveChange.html" target="_blank">こういうこと</a>です。<br />

    思った通りの実装ではあったが、<br />
    実際やった経験がなかったし、何しろ難読化されているので、<br />
    すぐには、突き止められなかった。<br />
    <br />
    ちなみに、難読化されたコードの整形には、<a href="http://www.gnu.org/software/indent/indent.html" target="_blank">GNU indent</a> (on Cygwin) を使いました。<br />
    <a href="http://www.emacswiki.org/cgi-bin/wiki/JavaScriptMode" target="_blank">javascript-mode</a>も便利ですね。<br />
  
    
  </div>
  
<div class="writeback">
    <h4>トラックバック</h4>
    
    
        (1)<br />
    
    
    
        [ このエントリへはツッコミ出来ません ]<br />
    
</div>
</div>
<br class="sep" /><div class="item">
  <h3><a href="diary/20050829.html">JavaScript の *.onkey* と IME の事情。その1</a></h3>
  <span class="meta">
    Posted : 2005-08-29 00:00 / Category : [開発日誌]
  </span>
  <div class="text">
    <a href="http://www.google.co.jp/webhp?hl=ja&complete=1" target="_blank">Google suggest</a>の補完候補表示機能は、便利なので、結構いろんな人がマネをしている。<br />
    俺も<a href="https://tonextone.com/sparQuery/" target="_blank">これ</a>で真似しているわけだが、まだマネし切れていない部分がある。<br />
    それは、かな漢字変換が未確定の段階での、補完候補取得機能。<br />
    IME-on でも、キーをタイプする毎に、補完候補が更新されるっていうヤツ。<br />
    Google 以外で、この機能を Cross-Browser に実装して、公開している人もいないようだ。<br />
    <br />
    という事で、あの難読化された <a href="http://www.google.co.jp/ac.js" target="_blank">ac.js</a> から学ぶ事にする。<br />
    現段階で分かっている事は、
    <pre>
      IME-on 状態で、

      IE:
          キータイプ毎に keydown, keyup が発生する。keypress は発生しない。
          未確定段階の入力値を getElementById().value で取得できる。

      Firefox:
          キータイプ毎に keydown, keypress が発生。keyup は発生しない。
          未確定段階の入力値を getElementById().value で取得できない。
          [Enter]で確定すると、 keyup が発生し、入力値を getElementById().value で取得できる。

      Opera:
          キータイプしても keydown,keypress,keyup は発生しない。
          未確定段階の入力値を getElementById().value で取得できない。
          [Enter]で確定しても、keydown,keypress,keyup は発生しない。
          そこから更に[Enter][Backspase]などの制御キーをタイプすると、
          ようやく keydown,keypress,keyup が発生する。
    </pre>
    [<a href="https://tonextone.com/test/eventTest.html" target="_blank">テスト</a>]<br />
    <br />
    やっぱり、google の中の人はすごいなぁ。それにひきかえ Opera の中の人は…。
  
    
  </div>
  
<div class="writeback">
    <h4>トラックバック</h4>
    
    
        (2)<br />
    
    <h4>ツッコミ</h4>
    <dl id="writebacklist">
    <dt>1: master <small>(08/29 23:24) </small></dt><dd>よく見ると、日本語版(hl=ja)と、英語版(hl=en)とでは、挙動が違う!!<br />英語版( <a href="http://www.google.com/webhp?hl=en&complete=1" target="_blank">http://www.google.com/webhp?hl=en&amp;complete=1</a> )<br />日本語版( <a href="http://www.google.co.jp/webhp?hl=ja&complete=1" target="_blank">http://www.google.co.jp/webhp?hl=ja&amp;complete=1</a> )<br /><br />英語版だと、Opera で IME-on の場合、(普通には)補完されない!!<br />やはり多言語対応のために hack が必要だったんじゃないかと推測する。<br /><br />その代わりというか、<br />英語版では第一候補の補完部分が入力欄に自動的に追加される。</dd>
<dt>2: master <small>(08/30 00:55) </small></dt><dd>InstallAC(document.f,document.f.q,document.f.btnG,&quot;search&quot;,&quot;en&quot;);<br />の5番目の引数に &quot;ja&quot; を渡すと、IME-on でも良い感じで処理するようになっている。<br />要するに、この引数での条件分岐を追っていけば、求める hack を突き止められる。</dd>

    </dl>
    
    
        [ このエントリへはツッコミ出来ません ]<br />
    
</div>
</div>
<br class="sep" /><div class="item">
  <h3><a href="diary/20050811.html">PHP フレームワーク その1</a></h3>
  <span class="meta">
    Posted : 2005-08-11 00:00 / Category : [開発日誌]
  </span>
  <div class="text">
    PHP のフレームワークを作ろうと思う。その名も GENUIN 。<br />
    PHP の言語設計上の特長や、 legacy を尊重した、<br />
    「オブジェクト指向」ではなく、<br />
    「オブジェクト思考」あるいは「オブジェクト嗜好」なフレームワーク。<br />
    Perl のオブジェクト指向の実装を参考にしたい。
    <br />
    <h4>特徴:</h4>
    <ul>
      <li>
        クラスを使わない。命名規約や配列や、その他 genuine な概念を駆使する。<br />
        $_CONFs,$_PARAMs,$_MESSAGEs,$_DB_*,$_SQL_*,...
      </li>
      <li>
        register_globals_securely On. <br />
        リクエスト変数へのグローバルアクセスをセキュアに提供。
      </li>
      <li>
        テンプレートエンジンを使わない。PHP で充分。<br />
        <br />
        $ less hoge.html
        <pre>
&lt;?function _head($_){?&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;/head&gt;
  &lt;body&gt;
    foo
    &lt;?o($_['var_head']);?&gt;
    bar
    &lt;?}?&gt;

    &lt;?function _loop($_){?&gt;
    foo
    &lt;?o($_['var_loop']);?&gt;
    bar
    &lt;?}?&gt;

    &lt;?function _tail($_){?&gt;
    foo
    &lt;?o($_['var_tail']);?&gt;
    bar
  &lt;/body&gt;
&lt;/html&gt;
&lt;?}?&gt;
&lt;?
include_once('path/to/config.php')
include_once($_CONF['path']['to_controller'].'hoge.php')
?&gt;
        </pre>
        <br />
        $ less hoge.php
        <pre>
&lt;?

// process_any();

$_ = $_PARAMs['head'];
_head($_);
unset($_);

foreach ($_PARAMs['loop'] as $var)
{
  $_ = $var;
  _loop($_);
  unset($_);
}

$_ = $_PARAMs['tail'];
_tail($_);
unset($_);
?&gt;
        </pre>

      </li>
    </ul>
  
    
  </div>
  
<div class="writeback">
    <h4>トラックバック</h4>
    
    
        (1)<br />
    
    <h4>ツッコミ</h4>
    <dl id="writebacklist">
    <dt>1: master <small>(08/12 10:37) </small></dt><dd>「プログラマー日記」さんも同じ事を考えているらしい。<br /><a href="http://www.programmers-paradise.com/tdiary/?date=20050801#p01" target="_blank">http://www.programmers-paradise.com/tdiary/?date=20050801#p01</a><br /><a href="http://www.programmers-paradise.com/tdiary/?date=20050808#p02" target="_blank">http://www.programmers-paradise.com/tdiary/?date=20050808#p02</a><br /><a href="http://www.programmers-paradise.com/tdiary/?date=20050809#p02" target="_blank">http://www.programmers-paradise.com/tdiary/?date=20050809#p02</a><br /><a href="http://www.programmers-paradise.com/tdiary/?date=20050809#p03" target="_blank">http://www.programmers-paradise.com/tdiary/?date=20050809#p03</a></dd>
<dt>2: itoh <small>(09/15 00:18) </small></dt><dd>p0t.jpの人も同じ事書いてた。<br /><a href="http://p0t.jp/mt/archives/2005/08/2_1.html" target="_blank">http://p0t.jp/mt/archives/2005/08/2_1.html</a><br />1行フレームワークAwesomeFrameworkだって。<br />命名規則っていうのは多かれ少なかれつかいますなー。</dd>
<dt>3: master <small>(10/30 16:41) </small></dt><dd>メモ:<br /><br />ライブラリはなるべく標準的なものを使う。<br />PEAR::<br /> DB, DB_DataObject, <br /> HTTP_Client, Mail_Mime, <br /> Auth, XML_Serializer, XML_RPC<br /><br />PECL の filter も気になる。<br />( <a href="http://pecl.php.net/package/filter" target="_blank">http://pecl.php.net/package/filter</a> )</dd>

    </dl>
    
    
        [ このエントリへはツッコミ出来ません ]<br />
    
</div>
</div>
<br class="sep" /><div class="item">
  <h3><a href="diary/20050731.html">JS::Lib その2</a></h3>
  <span class="meta">
    Posted : 2005-07-31 00:00 / Category : [開発日誌]
  </span>
  <div class="text">
    <a href="https://tonextone.com/note/diary/20050606.html">このエントリ</a>の続き。<br />

    "<a href="http://blog.joshuaeichorn.com/ajax-resources/library/" target="_blank">There and Back Again</a>"にある Ajax ライブラリを、いろいろ試してみた。<br />
    <br />
    このうち、<br />
    PHP の関数 func を、JavaScript の関数 x_func にマッピングして、<br />
    someObj.onClick = x_func(args,callback_func);<br />
    という使い方ができるやつは、<a href="http://blog.joshuaeichorn.com/ajax-resources/library/?filter=provides:mapped_functions" target="_blank">これら</a>。<br />
    <br />
    この中にある、Sajax を使っている。<br />
    それ以外も全部知ってはいたものの <a href="http://xajax.sourceforge.net/#why" target="_blank">xajax</a> は使ったことが無かったので使ってみた。<br />
    <br />
    Sajax との違い:<br />
    <br />
    ・DHTML も PHP でやる方針らしい(content replacement)。<br />
    &gt;&gt; クライアントサイドの事をサーバサイドの言語でやるのは、逆にメンドウだよ。<br />
    <br />
    ・そのための XML をサーバから返すらしい。<br />
    例えば、
    <pre>
&lt;update action="assign"&gt;
  &lt;target attribute="$sAttribute"&gt;$sTarget&lt;/target&gt;
  &lt;data&gt;&lt;![CDATA[$sData]]&gt;&lt;/data&gt;
&lt;/update&gt;</pre>
    &gt;&gt; ふーん。でも、JSON のほうが良いな…。<br />
    <br />
    ・配列を翻訳してくれるらしい。<br />
    &gt;&gt; へぇ。それは便利。<br />
    &gt;&gt; でも、PHPオブジェクト⇔JavaScriptオブジェクトの翻訳を、PHP でやってるんでしょ。<br />
    &gt;&gt; 俺は、処理が速いほうが良いから<a href="http://www.aurore.net/projects/php-json/" target="_blank">これ</a>使ってるしな…。<br />
    <br />
    という事で、乗り換えには至らず。<br />
    <br />
    Sajax の更新が滞っている事だけが気になる。<br />
    <br />
    ちなみに、<a href="http://ajax-pages.sourceforge.net/index.html" target="_blank">ajax-pages</a>というのも、試してみた。<br />
    これは、テンプレートファイルと、データファイルを、動的にロードしてページを作るというモノ。<br />
    テンプレートの書式は、いかにも、スクリプト埋め込み型で、すごく分かりやすい。
    <pre>
ここに HTML
&lt;% ここにJavaScript %&gt;
ここに HTML</pre>
    でも、今のところ、そういう使い方する予定が無いので、保留。
  
    
  </div>
  
<div class="writeback">
    <h4>ツッコミ</h4>
    <dl id="writebacklist">
    <dt>1: master <small>(07/31 01:34) </small></dt><dd>次にやるべき事:<br />外部サービスからの RSS をそのままブラウザに渡して JavaScript で処理してる部分を、<br />RSS -&gt;(magpieRSS)-&gt;(json-php)-&gt; JSON と変換して、ブラウザに返すようにしてみる。<br />そのほうが、サーバサイドの処理をカマせ易いし。</dd>
<dt>2: master <small>(08/12 15:28) </small></dt><dd>結局、<br />RSS -&gt;(PEAR::XML_Unserializer)-&gt;(php-json)-&gt; JSON <br />にしました。</dd>

    </dl>
    
    
        [ このエントリへはツッコミ出来ません ]<br />
    
</div>
</div>
<br class="sep" />
  
</div>
<div id="links">
<ul>
  <li>Search
    <form action="/note/" method="get" enctype="UTF-8">
<p>
<input type="hidden" name="m" value="search" />
<input type="hidden" name="cache" value="off" />
<input type="text" name="q" value="" size="10" />
<select name="u">
<option value="">ALL</option>
<option value="info">奥付</option>
<option value="diary">開発日誌</option>
</select>
</p>
<p>
<input type="checkbox" name="cmt" value="1" checked="checked" />ﾂｯｺﾐも
<input type="checkbox" name="and" value="1" checked="checked" />AND
<input type="submit" value="検索" />
</p>
</form>

  </li>
  <li>Calendar
    <table border="0" cellspacing="0" cellpadding="0" class="calendar">
<tr class="caption"><td><a href="index-d_2006-06.html">«</a></td><th colspan="5">September 2006</th><td></td></tr>
<tr><th class="su">Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th class="sa">Sa</th></tr>
<tr><td class="su"></td><td></td><td></td><td></td><td></td><td><a href="index-d_2006-09-01.html" title="ブログシステム乗り換えます。">1</a></td><td class="sa">2</td></tr>
<tr><td class="su">3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td class="sa">9</td></tr>
<tr><td class="su">10</td><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td class="sa">16</td></tr>
<tr><td class="su">17</td><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td><td class="sa">23</td></tr>
<tr><td class="su">24</td><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td><td class="sa">30</td></tr>
</table>

  </li>
  <li>Archives
    <ul>
<li><a href="index-d_2006.html">2006</a> (6)</li>
<li><a href="index-d_2005.html">2005</a> (32)</li>
</ul>
  </li>
  <li>Categories
    <ul>
<li><a href="index.html">Top</a> (39)<ul>
  <li><a href="info/index.html">奥付</a> (1)</li>
  <li><a href="diary/index.html">開発日誌</a> (31)</li>
  <li><a href="bbs/index.html">bbs</a> (0)</li>
  <li><a href="essay/index.html">随筆</a> (3)</li>
</ul></li>
</ul>
  </li>
  <li>Recent Entries
    <ul>
      <li>09/01 <a href="20060901.html">ブログシステム乗り換えます。</a></li>
<li>06/12 <a href="diary/20060612.html">open_basedir の 怪</a></li>
<li>05/29 <a href="diary/20060529.html">俺的PHP似非フレームワーク</a></li>
<li>05/28 <a href="diary/20060528.html">PHP の強み</a></li>
<li>03/16 <a href="diary/20060316.html">JavaScript による min-height, max-height の実装。</a></li>
<li>02/27 <a href="diary/20060227.html">ちょっと安全かもしれない eval() の使い方。</a></li>
<li>12/31 <a href="20051231.html">新年の挨拶</a></li>
<li>12/23 <a href="diary/20051223.html">PostgreSQL で RDB 設計 その2</a></li>
<li>12/22 <a href="diary/20051222.html">PostgreSQL で RDB 設計 その1</a></li>
<li>12/13 <a href="diary/server/20051213.html">サーバ管理その1</a></li>

    </ul>
  </li>
  <li>Recent Comments
    
  </li>
  <li>Recent TrackBacks
    
  </li>
  <li>Syndicate this site
    <ul>
      <li><a href="http://legacy.tonextone.com/note/rss.rdf">RSS 1.0 Feed</a></li>
    </ul>
  </li>
  <li>Powered by
    <ul>
      <li>
        <a href="http://rinn.e-site.jp/rnote/">rNote 0.9.7.5</a>
      </li>
      <li>
        <a href="http://www.bookshelf.jp/soft/meadow.html">Meadow</a>
      </li>
      <li>
        <a href="http://winscp.net/eng/">WinSCP</a>
      </li>
    </ul>
  </li>
  <li>Del.icio.us tags
    <script type="text/javascript" src="http://del.icio.us/feeds/js/tags/tonextone?sort=freq;totals;size=10-17;color=000000-0000ff;title="></script>
  </li>
  <li>Flickr recent photos
    <!-- Start of Flickr Badge -->
    <style type="text/css">/*
    Images are wrapped in divs classed "flickr_badge_image" with ids
    "flickr_badge_imageX" where "X" is an integer specifying ordinal position.
    Below are some styles to get you started!
    */
    #flickr_badge_uber_wrapper {text-align:center; width:auto;}
    #flickr_badge_wrapper {padding:0px;}
    .flickr_badge_image {float:left; margin:2px;}
    .flickr_badge_image img {border: 1px solid black !important;}
    #flickr_badge_source {text-align:left; margin:0 10px 0 10px;}
    #flickr_badge_icon {float:left; margin-right:5px;}
    #flickr_www {display:block; padding:0 10px 0 10px !important; font: 11px Arial, Helvetica, Sans serif !important; color:#3993ff !important;}
    #flickr_badge_uber_wrapper a:hover,
    #flickr_badge_uber_wrapper a:link,
    #flickr_badge_uber_wrapper a:active,
    #flickr_badge_uber_wrapper a:visited {text-decoration:none !important; background:inherit !important;color:#3993ff;}
    #flickr_badge_wrapper {background-color:#ffffff;border: none;}
    #flickr_badge_source {padding:0 !important; font: 11px Arial, Helvetica, Sans serif !important; color:#666666 !important;}
    </style>
    <div id="flickr_badge_uber_wrapper">
      <a href="http://www.flickr.com" id="flickr_www">www.<strong style="color:#3993ff">flick<span style="color:#ff1c92">r</span></strong>.com</a>
      <div id="flickr_badge_wrapper">
        <script type="text/javascript" src="http://www.flickr.com/badge_code_v2.gne?count=10&display=latest&size=t&layout=x&source=user&user=11342253%40N00"></script>
      </div>
    </div>
    <br style="clear:both;">
    <!-- End of Flickr Badge -->
    
  </li>
  <li>Last.fm Weekly tracks
    <a href="http://www.last.fm/user/tonextone/?chartstyle=sideGrey"><img src="http://imagegen.last.fm/sideGrey/tracks/tonextone.gif" border="0" alt="tonextone's Last.fm Weekly Tracks Chart" /></a>
  </li>
  <li>早起き生活
    <a href="http://www.hayaoki-seikatsu.com/">
      <img src="http://www.hayaoki-seikatsu.com/users/tonextone/graphs/sidebar.png" width="150" height="150" alt="早起き生活">
    </a>
  </li>
  <li>
    <a href="http://www.technorati.com/claim/ud3qys35px" rel="me"></a>
  </li>
</ul>
</div>
</body></html>
